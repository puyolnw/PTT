# สรุประบบร้าน OTOP (OTOP Shop System)

## ภาพรวมระบบ

ระบบร้าน OTOP เป็นระบบจัดการร้านค้า OTOP ชุมชนที่อยู่ในพื้นที่ปั๊มน้ำมัน ครอบคลุมการจัดการสต็อกสินค้า การบันทึกยอดขาย การซื้อสินค้าเข้า และรายงานต่างๆ

---

## ฟังก์ชันหลักทั้งหมด

### 1. Dashboard (หน้าหลัก)
**หน้าที่:** แสดงภาพรวมข้อมูลร้าน OTOP ทั้งหมด

**ข้อมูลที่แสดง:**
- ยอดขายวันนี้ (เปรียบเทียบกับเมื่อวาน)
- ยอดขายรวมเดือนนี้ (เฉลี่ยต่อวัน)
- มูลค่าสต็อก
- จำนวนสินค้าใกล้หมด/หมด
- สรุปยอดขายและช่องทางการชำระเงิน (เงินสด, โอน/QR, อื่นๆ)
- สรุปการซื้อสินค้าเข้า (จำนวนบิล, ยอดซื้อรวม, เฉลี่ยต่อบิล)
- สต็อกสินค้า OTOP (รายการสินค้าที่ใกล้หมด)
- บิลล่าสุด (ประวัติการซื้อสินค้าเข้า)
- ยอดขายรายวัน (10 วันล่าสุด)
- หมวดหมู่สินค้า (จำนวนรายการแต่ละหมวด)

**Flow การทำงาน:**
1. ระบบดึงข้อมูลจาก Sales, Stock, Purchases
2. คำนวณสถิติแบบ Real-time
3. แสดงข้อมูลในรูปแบบ Dashboard Cards, Charts และ Tables

---

### 2. สต็อกสินค้า (Stock)

**หน้าที่:** จัดการสต็อกสินค้า OTOP

**ข้อมูลที่เก็บ:**
- รหัสสินค้า (Auto-generated: P-XXX)
- ชื่อสินค้า
- หมวดหมู่ (ขนมขบเคี้ยว, อาหารสด, เบเกอรี่, ของแห้ง, สุขภาพ, หัตถกรรม)
- หมู่บ้าน/จังหวัด (แหล่งที่มา)
- จำนวนคงเหลือ (On Hand)
- หน่วย (ชิ้น, ผืน, กล่อง, ชุด, ลัง)
- ต้นทุน (บาท)
- ราคาขาย (บาท)
- วันหมดอายุ / รอบจัดงาน
- เกณฑ์แจ้งเตือน (Low Stock Threshold)
- ผู้ผลิต / กลุ่มชุมชน (Supplier)
- Artisan Code (รหัสช่างฝีมือ)
- วันที่สั่งซื้อล่าสุด

**ฟังก์ชัน:**
- ดูรายการสต็อกทั้งหมด
- ค้นหาสินค้า (ตามชื่อ, รหัส, หมวดหมู่)
- เพิ่มสินค้าใหม่
- นำเข้าข้อมูลจาก Excel
- ส่งออกข้อมูลสต็อก (Excel)
- ดูสถานะสต็อก (ปกติ, ใกล้หมด, สินค้าหมด)
- วางแผนสั่งซื้อ (Planning) - กำลังพัฒนา
- ดูประวัติการซื้อเข้า (Transactions) - กำลังพัฒนา

**Flow การทำงาน:**

1. **เพิ่มสินค้าใหม่:**
   - กรอกชื่อสินค้า
   - เลือกหมวดหมู่
   - ระบุหมู่บ้าน/จังหวัด (แหล่งที่มา)
   - กรอกจำนวน, หน่วย
   - กรอกต้นทุนและราคาขาย
   - ระบุวันหมดอายุ/รอบจัดงาน
   - กำหนดเกณฑ์แจ้งเตือน (Low Stock Threshold)
   - ระบุผู้ผลิต/กลุ่มชุมชน
   - กรอก Artisan Code (ถ้ามี)
   - ระบบสร้างรหัสสินค้าอัตโนมัติ
   - บันทึกข้อมูล

2. **การตรวจสอบสถานะสต็อก:**
   - ระบบตรวจสอบจำนวนคงเหลือเทียบกับเกณฑ์แจ้งเตือน
   - สถานะ "ปกติ": จำนวน >= เกณฑ์แจ้งเตือน
   - สถานะ "ใกล้หมด": จำนวน < เกณฑ์แจ้งเตือน แต่ > 0
   - สถานะ "สินค้าหมด": จำนวน = 0

3. **นำเข้าข้อมูลจาก Excel:**
   - เลือกไฟล์ Excel
   - ระบบอ่านข้อมูลและอัปเดตสต็อกอัตโนมัติ
   - ตรวจสอบความถูกต้องของข้อมูล

---

### 3. ยอดขาย (Sales)

**หน้าที่:** บันทึกและจัดการยอดขายรายวัน

**ข้อมูลที่เก็บ:**
- วันที่
- ยอดขายสินค้า (Product Sales)
- เงินสด (Cash)
- โอน/QR (Transfer/QR)
- อื่นๆ (Other)
- รวมรับจริง (Actual Total)
- Diff (ผลต่างระหว่างยอดขายสินค้ากับรวมรับจริง)
- หมายเหตุ (Remarks)

**ฟังก์ชัน:**
- **แท็บยอดขายรายวัน (Sales):** บันทึกและดูยอดขายรายวัน
- **แท็บบันทึกรายจ่าย (Expenses):** บันทึกรายจ่ายต่างๆ - กำลังพัฒนา
- **แท็บกำไร/ขาดทุน (P&L):** ดูกำไร/ขาดทุน - กำลังพัฒนา
- นำเข้าข้อมูลจาก Excel (แยกตามประเภท: Sales, Expenses, P&L)
- ส่งออกข้อมูล (Excel)

**Flow การทำงาน:**

1. **บันทึกยอดขายรายวัน:**
   - ระบุวันที่
   - กรอกยอดขายสินค้า
   - กรอกเงินสด
   - กรอกโอน/QR
   - กรอกอื่นๆ (ถ้ามี)
   - กรอกรวมรับจริง
   - ระบบคำนวณ Diff อัตโนมัติ (Diff = รวมรับจริง - ยอดขายสินค้า)
   - กรอกหมายเหตุ (ถ้ามี)
   - บันทึกข้อมูล

2. **การคำนวณ Diff:**
   - Diff = รวมรับจริง - ยอดขายสินค้า
   - ถ้า Diff > 0 = มีเงินเพิ่ม (อาจลืมคีย์สินค้า)
   - ถ้า Diff < 0 = มีเงินขาด (อาจคีย์สินค้าผิด)
   - ถ้า Diff = 0 หรือ null = ตรงกัน

3. **นำเข้าข้อมูลจาก Excel:**
   - เลือกประเภทข้อมูล (Sales, Expenses, P&L)
   - เลือกเดือนและปี
   - ระบุช่วงวันที่ (ถ้าต้องการ)
   - เลือกไฟล์ Excel
   - ระบบอ่านข้อมูลและอัปเดตอัตโนมัติ

---

### 4. การซื้อสินค้าเข้า (Purchases)

**หน้าที่:** บันทึกการซื้อสินค้าเข้าสต็อก

**ข้อมูลที่เก็บ:**
- เลขที่บิล (Auto-generated: PE-XXX)
- วันที่ทำรายการ
- รายการสินค้า:
  - สินค้า (เลือกจากสต็อกหรือระบุใหม่)
  - จำนวน
  - หน่วย
  - ราคา/หน่วย
  - ราคารวม (คำนวณอัตโนมัติ)
  - ร้านค้า/ซัพพลายเออร์
  - การชำระ (เงินสด, โอนเงิน, เครดิต)
- ยอดรวมสุทธิ
- ผู้บันทึก
- สถานะ (สำเร็จ, รอดำเนินการ)

**ฟังก์ชัน:**
- บันทึกการซื้อสินค้าเข้า
- เลือกสินค้าจากสต็อกหรือระบุสินค้าใหม่
- เพิ่ม/ลบรายการสินค้า
- ดูประวัติการบันทึก
- ดูรายละเอียดบิล
- นำเข้าข้อมูลจาก Excel

**Flow การทำงาน:**

1. **บันทึกการซื้อสินค้าเข้า:**
   - ระบุวันที่ทำรายการ
   - เลือกสินค้า (จากรายการสต็อก) หรือระบุสินค้าใหม่
   - กรอกจำนวน, หน่วย
   - กรอกราคา/หน่วย
   - ระบบคำนวณราคารวมอัตโนมัติ
   - ระบุร้านค้า/ซัพพลายเออร์
   - เลือกวิธีการชำระ
   - เพิ่มรายการสินค้าเพิ่มเติม (ถ้ามี)
   - ระบบคำนวณยอดรวมสุทธิอัตโนมัติ
   - บันทึกข้อมูลเข้าสต็อก

2. **การอัปเดตสต็อก:**
   - เมื่อบันทึกการซื้อสินค้าเข้า
   - ระบบอัปเดตจำนวนคงเหลือในสต็อกอัตโนมัติ
   - อัปเดตวันที่สั่งซื้อล่าสุด

3. **การเลือกสินค้า:**
   - เลือกจากรายการสต็อกที่มีอยู่ (แสดงจำนวนคงเหลือ)
   - หรือเลือก "สินค้าใหม่" เพื่อระบุสินค้าที่ไม่มีในระบบ

---

### 5. รายงาน (Reports)

**หน้าที่:** สรุปและรายงานข้อมูลร้าน OTOP

**ข้อมูลที่แสดง:**
- ยอดขายรวม (เฉลี่ยต่อวัน)
- กำไรขั้นต้น (Gross Profit) และมาร์จิ้น
- มูลค่าสต็อก
- จำนวนสินค้าใกล้หมด
- สรุปยอดขาย (เงินสด, โอน/QR)
- สรุปสต็อก (มูลค่าสต็อกรวม, จำนวนรายการ, สินค้าปกติ/ใกล้หมด)
- ยอดขายตามหมวดสินค้า (สัดส่วน %)
- ยอดขายรายวัน (10 วันล่าสุด)
- สรุปการซื้อสินค้าเข้า (จำนวนบิล, ยอดซื้อรวม, เฉลี่ยต่อบิล)

**ฟังก์ชัน:**
- แสดงสถิติและกราฟ
- ส่งออกรายงาน (Excel)

**Flow การทำงาน:**
1. ระบบดึงข้อมูลจาก Sales, Stock, Purchases
2. คำนวณสถิติและอัตราส่วน
3. แสดงผลในรูปแบบ Cards, Charts และ Tables
4. ส่งออกรายงานเมื่อต้องการ

---

### 6. ตั้งค่า (Settings)

**หน้าที่:** จัดการการตั้งค่าร้าน OTOP

**ข้อมูลที่เก็บ:**
- **ข้อมูลติดต่อหลัก:**
  - ผู้ประสานงาน
  - เบอร์ติดต่อ
  - อีเมล
  - Line / Social
  - ที่ตั้งในปั๊ม
  - เวลาเปิด-ปิด
  - ที่ตั้งคลังสินค้า
  - หมายเหตุ

- **นโยบายและการแจ้งเตือน:**
  - เปิดรับพรีออเดอร์จากลูกค้าองค์กร/ทัวร์
  - เปิดใช้งานคูปอง PTT Blue Card
  - แจ้งเตือนสินค้าต่ำกว่าเกณฑ์ (ส่ง LINE OA)
  - แชร์ยอดขายรายสัปดาห์ให้ชุมชนอัตโนมัติ (ส่งอีเมล)

**Flow การทำงาน:**
1. กรอก/แก้ไขข้อมูลติดต่อ
2. ตั้งค่าเวลาเปิด-ปิด
3. เปิด/ปิดฟังก์ชันต่างๆ
4. บันทึกการตั้งค่า

---

## Flow การทำงานหลักของระบบ

### Flow การจัดการสต็อก

1. **เพิ่มสินค้าเข้าสต็อก:**
   - เพิ่มสินค้าใหม่ในระบบ (กรอกข้อมูลครบถ้วน)
   - หรือบันทึกการซื้อสินค้าเข้า (จะอัปเดตสต็อกอัตโนมัติ)

2. **การตรวจสอบสต็อก:**
   - ระบบตรวจสอบจำนวนคงเหลือเทียบกับเกณฑ์แจ้งเตือน
   - แสดงสถานะ (ปกติ/ใกล้หมด/หมด)
   - แจ้งเตือนเมื่อสินค้าใกล้หมด (ถ้าเปิดใช้งาน)

3. **การขายสินค้า:**
   - เมื่อมีการขาย ระบบจะหักจำนวนจากสต็อก (ถ้ามีการเชื่อมต่อกับระบบ POS)
   - หรือบันทึกยอดขายแยกต่างหาก

### Flow การบันทึกยอดขาย

1. **บันทึกยอดขายรายวัน:**
   - กรอกยอดขายสินค้า
   - กรอกเงินสด, โอน/QR, อื่นๆ
   - กรอกรวมรับจริง
   - ระบบคำนวณ Diff อัตโนมัติ
   - บันทึกข้อมูล

2. **การตรวจสอบ Diff:**
   - ถ้า Diff ≠ 0 แสดงว่ามีความคลาดเคลื่อน
   - ตรวจสอบและแก้ไขข้อมูล
   - กรอกหมายเหตุอธิบายความคลาดเคลื่อน

3. **การนำเข้าข้อมูล:**
   - นำเข้าข้อมูลยอดขายจาก Excel
   - ระบบอัปเดตข้อมูลอัตโนมัติ

### Flow การซื้อสินค้าเข้า

1. **บันทึกการซื้อสินค้าเข้า:**
   - เลือกสินค้าจากสต็อกหรือระบุสินค้าใหม่
   - กรอกจำนวน, ราคา, ร้านค้า, วิธีการชำระ
   - ระบบคำนวณราคารวมและยอดรวมสุทธิ
   - บันทึกข้อมูล

2. **การอัปเดตสต็อก:**
   - ระบบอัปเดตจำนวนคงเหลืออัตโนมัติ
   - อัปเดตวันที่สั่งซื้อล่าสุด

3. **การตรวจสอบประวัติ:**
   - ดูประวัติการซื้อสินค้าเข้า
   - ดูรายละเอียดบิลแต่ละใบ

---

## สรุปข้อมูลหลักที่ระบบจัดการ

### 1. ข้อมูลสินค้า (Stock Item)
- ข้อมูลพื้นฐาน (รหัส, ชื่อ, หมวดหมู่)
- ข้อมูลสต็อก (จำนวน, หน่วย, ต้นทุน, ราคาขาย)
- ข้อมูลแหล่งที่มา (หมู่บ้าน/จังหวัด, ผู้ผลิต, Artisan Code)
- ข้อมูลการจัดการ (เกณฑ์แจ้งเตือน, วันหมดอายุ, วันที่สั่งซื้อล่าสุด)

### 2. ข้อมูลยอดขาย (Sales Record)
- วันที่
- ยอดขายสินค้า
- ช่องทางการชำระเงิน (เงินสด, โอน/QR, อื่นๆ)
- รวมรับจริง
- Diff และหมายเหตุ

### 3. ข้อมูลการซื้อสินค้าเข้า (Purchase Entry)
- เลขที่บิล
- วันที่
- รายการสินค้า (สินค้า, จำนวน, ราคา, ร้านค้า, วิธีการชำระ)
- ยอดรวม
- ผู้บันทึก
- สถานะ

### 4. ข้อมูลการตั้งค่า (Settings)
- ข้อมูลติดต่อ
- เวลาทำการ
- นโยบายและการแจ้งเตือน

---

## ฟีเจอร์พิเศษ

### 1. การนำเข้าข้อมูลจาก Excel
- รองรับการนำเข้าข้อมูลสต็อก, ยอดขาย, รายจ่าย, P&L
- เลือกช่วงวันที่ได้
- ระบบตรวจสอบและอัปเดตข้อมูลอัตโนมัติ

### 2. การส่งออกข้อมูล
- ส่งออกสต็อกเป็น Excel
- ส่งออกยอดขายเป็น Excel
- ส่งออกรายงานเป็น Excel

### 3. การแจ้งเตือน
- แจ้งเตือนสินค้าใกล้หมด (ส่ง LINE OA)
- แชร์ยอดขายรายสัปดาห์ให้ชุมชน (ส่งอีเมล)

### 4. การคำนวณอัตโนมัติ
- คำนวณราคารวม (จำนวน × ราคา/หน่วย)
- คำนวณยอดรวมสุทธิ
- คำนวณ Diff (ผลต่างยอดขาย)
- คำนวณสถิติและอัตราส่วนต่างๆ

---

## หมายเหตุสำคัญ

1. **การเชื่อมโยงข้อมูล:** ข้อมูลต่างๆ เชื่อมโยงกัน เช่น การซื้อสินค้าเข้าจะอัปเดตสต็อกอัตโนมัติ

2. **การคำนวณอัตโนมัติ:** ระบบคำนวณราคารวม, ยอดรวม, Diff, สถิติต่างๆ อัตโนมัติ

3. **การจัดการ Diff:** Diff คือผลต่างระหว่างยอดขายสินค้ากับรวมรับจริง ใช้ตรวจสอบความถูกต้องของข้อมูล

4. **การแจ้งเตือน:** ระบบสามารถแจ้งเตือนสินค้าใกล้หมดและแชร์ยอดขายให้ชุมชนได้ (ถ้าเปิดใช้งาน)

5. **การนำเข้า/ส่งออก:** ระบบรองรับการนำเข้าข้อมูลจาก Excel และส่งออกข้อมูลเป็น Excel

6. **ฟีเจอร์ที่กำลังพัฒนา:**
   - วางแผนสั่งซื้อ (Planning)
   - ประวัติการซื้อเข้า (Transactions)
   - บันทึกรายจ่าย (Expenses)
   - กำไร/ขาดทุน (P&L)

