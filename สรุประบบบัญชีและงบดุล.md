# สรุประบบบัญชีและงบดุล (Accounting & Financial System - M6)

## ภาพรวมระบบ

ระบบบัญชีและงบดุล (M6) เป็นระบบบัญชีกลางที่รับข้อมูลจากทุกโมดูล (M1, M2, M3, M5) เพื่อลงบัญชีอัตโนมัติ คำนวณภาษี ปิดงบดุลรายเดือน และออกรายงานการเงินต่างๆ สำหรับนิติบุคคลและสาขาทั้งหมด (1 สำนักงานใหญ่ + 4 สาขา)

---

## ฟังก์ชันหลักทั้งหมด

### 1. Dashboard (ภาพรวม)

**หน้าที่:** แสดงภาพรวมข้อมูลบัญชีทั้งหมดแบบเรียลไทม์

**ข้อมูลที่แสดง:**
- รายได้รวม (เปรียบเทียบกับเดือนที่แล้ว)
- ค่าใช้จ่ายรวม (รวมทุกโมดูล)
- กำไรสุทธิ (เปรียบเทียบกับเดือนที่แล้ว)
- VAT ที่ต้องจ่าย (VAT Output - VAT Input)
- สถานะปิดงบดุล (ปิดแล้ว/ยังไม่ปิด พร้อมวันที่และผู้ปิด)
- รายได้แยกตามโมดูล (M1 ขายน้ำมัน, M2 ค่าเช่า, M3 อื่นๆ, M5 ดอกเบี้ย)
- สภาพคล่องและอัตราส่วนทางการเงิน (Current Ratio, D/E Ratio)
- กระทบยอดธนาคาร (ยอดระบบ, ยอดธนาคาร, ส่วนต่าง, อัตราตรงกัน)
- รายการบัญชีล่าสุด (Journal Entries จากทุกโมดูล)
- สรุปการเงินเดือนปัจจุบัน (รายได้, ค่าใช้จ่าย, กำไรสุทธิ)

**Flow การทำงาน:**
1. ระบบดึงข้อมูลจากทุกโมดูล (M1, M2, M3, M5)
2. คำนวณสถิติแบบ Real-time
3. แสดงข้อมูลในรูปแบบ Summary Cards และ Recent Activity Lists

---

### 2. Chart of Accounts (ผังบัญชี)

**หน้าที่:** จัดการผังบัญชี (COA) ไม่จำกัดระดับ

**ข้อมูลที่จัดการ:**
- รหัสบัญชี (Account Code)
- ชื่อบัญชี (Account Name)
- ประเภทบัญชี (Asset, Liability, Equity, Income, Expense)
- ระดับบัญชี (Level 1, 2, 3, ...)
- บัญชีแม่ (Parent Account)
- ยอดคงเหลือ (Balance)

**Flow การทำงาน:**
1. เพิ่ม/แก้ไข/ลบบัญชี
2. กำหนดระดับและบัญชีแม่
3. ระบบแสดงโครงสร้างแบบลำดับชั้น
4. ค้นหาและกรองตามประเภทบัญชี

---

### 3. Journal Entries (รายการบัญชี)

**หน้าที่:** จัดการรายการบัญชีที่รับจากทุกโมดูล

**ข้อมูลที่จัดการ:**
- รหัสรายการ (Journal Entry ID)
- วันที่
- คำอธิบาย
- โมดูลต้นทาง (M1, M2, M3, M5)
- เดบิต (Debit) - บัญชีและจำนวนเงิน
- เครดิต (Credit) - บัญชีและจำนวนเงิน
- ยอดรวม
- สถานะ (Posted, Draft)
- สร้างโดย (ระบบอัตโนมัติ/ผู้ใช้)

**Flow การทำงาน:**
1. ระบบรับข้อมูลจากโมดูลอื่น (M1, M2, M3, M5)
2. ลง Journal Entry อัตโนมัติตาม GL Mapping
3. ตรวจสอบความสมดุล (Debit = Credit)
4. Post รายการเมื่อผ่านการตรวจสอบ
5. แสดงรายการตามวันที่และโมดูล

---

### 4. Trial Balance (งบทดลอง)

**หน้าที่:** สรุปยอดคงเหลือของทุกบัญชี ณ วันสิ้นงวด

**ข้อมูลที่แสดง:**
- รหัสบัญชี
- ชื่อบัญชี
- ยอดเดบิต
- ยอดเครดิต
- สถานะความสมดุล (สมดุล/ไม่สมดุล)
- ยอดรวมเดบิต
- ยอดรวมเครดิต

**Flow การทำงาน:**
1. เลือกงวดที่ต้องการดู
2. ระบบดึงยอดคงเหลือของทุกบัญชี
3. คำนวณยอดรวมเดบิตและเครดิต
4. ตรวจสอบความสมดุล
5. ส่งออกเป็น Excel

---

### 5. Bank Reconciliation (กระทบยอดธนาคาร)

**หน้าที่:** กระทบยอดยอดเงินฝากธนาคารกับ Bank Statement

**ข้อมูลที่จัดการ:**
- ยอดระบบ (System Balance)
- ยอดธนาคาร (Bank Balance)
- ส่วนต่าง (Difference)
- อัตราการตรงกัน (Match Rate)
- รายการที่ตรงกัน (Matched Transactions)
- รายการที่ไม่ตรงกัน (Unmatched Items)

**Flow การทำงาน:**
1. นำเข้าไฟล์ Bank Statement (Excel)
2. ระบบกระทบยอดอัตโนมัติ
3. แสดงรายการที่ตรงกันและไม่ตรงกัน
4. จับคูรรายการที่ไม่ตรงกันด้วยตนเอง
5. บันทึกการกระทบยอดเมื่อเสร็จสิ้น

---

### 6. Inventory Reconciliation (กระทบยอดสต็อก)

**หน้าที่:** กระทบยอดสต็อกน้ำมันและสินค้าจาก M1/M2 กับยอดขายจริง

**ข้อมูลที่จัดการ:**
- สินค้า (Product Name)
- ยอดเปิด (Opening Balance)
- ซื้อเข้า (Purchases)
- ขายออก (Sales)
- ยอดระบบ (System Balance)
- ยอดนับจริง (Physical Count)
- ส่วนต่าง (Variance)
- สถานะ (ปกติ, เตือน, ผิดปกติ)
- Loss/Gain

**Flow การทำงาน:**
1. รับข้อมูลสต็อกจาก M1/M2 (Balance Petrel, Dip Reading)
2. รับข้อมูลยอดขายจริง
3. คำนวณยอดระบบ (Opening + Purchases - Sales)
4. เปรียบเทียบกับยอดนับจริง
5. คำนวณส่วนต่างและ Loss/Gain
6. แจ้งเตือนหากส่วนต่างเกิน 5%

---

### 7. Tax Calculation (คำนวณภาษี)

**หน้าที่:** คำนวณภาษีอัตโนมัติ (VAT Input/Output, ภาษีหัก ณ ที่จ่าย)

**ข้อมูลที่จัดการ:**
- VAT Output (ภาษีขาย)
  - จาก M1 ขายน้ำมัน
  - จาก M2 ค่าเช่า
  - จาก M5 ดอกเบี้ย
  - รวม VAT Output
- VAT Input (ภาษีซื้อ)
  - จากซื้อสินค้า
  - จากค่าใช้จ่ายอื่นๆ
  - รวม VAT Input
- ภาษีหัก ณ ที่จ่าย (Withholding Tax)
  - จากเงินเดือน (อัตรา 2%)
  - จากบริการ (อัตรา 5%)
  - รวมภาษีหัก ณ ที่จ่าย
- VAT ที่ต้องจ่าย (VAT Output - VAT Input)
- ภาษีที่ต้องจ่ายรวม (VAT Payable + Withholding Tax)

**Flow การทำงาน:**
1. ระบบดึงข้อมูลธุรกรรมจากทุกโมดูล
2. คำนวณ VAT Output อัตโนมัติ (อัตรา 7%)
3. คำนวณ VAT Input อัตโนมัติ
4. คำนวณภาษีหัก ณ ที่จ่ายตามอัตรา
5. คำนวณภาษีที่ต้องจ่าย
6. ส่งกรมสรรพากร (e-Tax) หรือออกรายงาน PDF

---

### 8. Tax Reports (รายงานภาษี)

**หน้าที่:** จัดทำรายงานภาษีและกฎหมาย

**รายงานที่จัดทำ:**
- ภ.ง.ด.1 (ภาษีหัก ณ ที่จ่าย - เงินเดือน)
- ภ.ง.ด.3 (ภาษีหัก ณ ที่จ่าย - ค่าเช่า)
- ภ.ง.ด.53 (ภาษีหัก ณ ที่จ่าย - บริการ)
- สปส.1-10 (รายงานประกันสังคม)
- ภ.พ.30 (รายงานภาษีมูลค่าเพิ่ม)

**Flow การทำงาน:**
1. เลือกรายงานที่ต้องการ
2. ระบบดึงข้อมูลจาก Tax Calculation
3. จัดทำรายงานตามรูปแบบที่กำหนด
4. ตรวจสอบความถูกต้อง
5. ส่งกรมสรรพากร (e-Tax) หรือดาวน์โหลด PDF

---

### 9. Month End Closing (ปิดงบดุล)

**หน้าที่:** ปิดงบดุลรายเดือน

**ข้อมูลที่จัดการ:**
- สถานะปิดงบดุล (ปิดแล้ว/ยังไม่ปิด)
- วันที่ปิด
- ผู้ปิด
- ตรวจสอบก่อนปิดงบดุล:
  - ตรวจสอบรายการบัญชีทั้งหมด
  - กระทบยอดธนาคาร
  - คำนวณภาษี VAT
  - ตรวจสอบยอดคงเหลือ
  - บันทึกค่าเสื่อมราคา
- สรุปการเงิน (รายได้, ค่าใช้จ่าย, กำไรสุทธิ, สินทรัพย์, หนี้สิน, ทุน)
- รายงานที่สร้างแล้ว (งบดุล, งบกำไรขาดทุน, งบกระแสเงินสด)

**Flow การทำงาน:**
1. ตรวจสอบรายการบัญชีทั้งหมด
2. กระทบยอดธนาคาร
3. คำนวณภาษี VAT
4. ตรวจสอบยอดคงเหลือ (Trial Balance)
5. บันทึกค่าเสื่อมราคา
6. สร้างรายงานการเงิน (งบดุล, งบกำไรขาดทุน, งบกระแสเงินสด)
7. ปิดงบดุล (ล็อกข้อมูล)
8. ไม่สามารถแก้ไขข้อมูลที่ปิดแล้วได้

---

### 10. Financial Reports (รายงานการเงิน)

**หน้าที่:** ออกรายงานการเงินต่างๆ

**รายงานที่ออก:**
- งบดุล (Balance Sheet)
  - สินทรัพย์ (สินทรัพย์หมุนเวียน, สินทรัพย์ถาวร)
  - หนี้สิน (หนี้สินหมุนเวียน, หนี้สินระยะยาว)
  - ทุน (ทุนจดทะเบียน, กำไรสะสม)
- งบกำไรขาดทุน (Income Statement / P&L)
  - รายได้ (ขายน้ำมัน, ค่าเช่า, ดอกเบี้ย, อื่นๆ)
  - ค่าใช้จ่าย (เงินเดือน, ค่าเช่า, สาธารณูปโภค, ค่าเสื่อมราคา, อื่นๆ)
  - กำไรสุทธิ
- งบกระแสเงินสด (Cash Flow Statement)
  - กระแสเงินสดจากการดำเนินงาน
  - กระแสเงินสดจากการลงทุน
  - กระแสเงินสดจากการจัดหาเงิน
  - การเปลี่ยนแปลงสุทธิของเงินสด
  - ยอดเงินสดต้นงวด/ปลายงวด

**Flow การทำงาน:**
1. เลือกรายงานที่ต้องการ
2. เลือกงวด
3. ระบบดึงข้อมูลจากบัญชี
4. สร้างรายงานตามรูปแบบที่กำหนด
5. ดาวน์โหลด PDF หรือ Excel

---

### 11. Aging Report (รายงานอายุหนี้)

**หน้าที่:** รายงานอายุลูกหนี้/เจ้าหนี้เพื่อบริหารสภาพคล่อง

**ข้อมูลที่แสดง:**
- ลูกหนี้ (Receivables)
  - 0-30 วัน
  - 31-60 วัน
  - 61-90 วัน
  - เกิน 90 วัน
- เจ้าหนี้ (Payables)
  - 0-30 วัน
  - 31-60 วัน
  - 61-90 วัน
  - เกิน 90 วัน
- รายละเอียดตามอายุหนี้ (ชื่อ, ยอดหนี้, อายุหนี้, สถานะ)

**Flow การทำงาน:**
1. เลือกประเภท (ลูกหนี้/เจ้าหนี้)
2. ระบบคำนวณอายุหนี้จากวันที่ครบกำหนดชำระ
3. แสดงยอดรวมแยกตามช่วงอายุ
4. แสดงรายละเอียดรายการที่ต้องติดตาม
5. ส่งออกเป็น Excel

---

### 12. Fixed Assets (สินทรัพย์ถาวร)

**หน้าที่:** จัดการสินทรัพย์ถาวรและคำนวณค่าเสื่อมราคา

**ข้อมูลที่จัดการ:**
- รหัสสินทรัพย์
- ชื่อสินทรัพย์
- ประเภท (ถังน้ำมัน, อุปกรณ์, อาคาร)
- สถานที่
- วันที่ซื้อ
- มูลค่าซื้อ
- อายุการใช้งาน (ปี)
- วิธีคำนวณค่าเสื่อม (Straight-Line)
- ค่าเสื่อมสะสม
- มูลค่าตามบัญชี (Net Book Value)

**Flow การทำงาน:**
1. เพิ่มสินทรัพย์ใหม่
2. กำหนดอายุการใช้งานและวิธีคำนวณค่าเสื่อม
3. ระบบคำนวณค่าเสื่อมรายเดือนอัตโนมัติ
4. บันทึกค่าเสื่อมเมื่อปิดงบดุล
5. แสดงตารางค่าเสื่อม

---

### 13. Vendors & Customers (คู่ค้า)

**หน้าที่:** จัดการข้อมูลเจ้าหนี้และลูกหนี้

**ข้อมูลที่จัดการ:**
- รหัสคู่ค้า
- ชื่อคู่ค้า
- ประเภท (Vendor/Customer)
- เลขประจำตัวผู้เสียภาษี (Tax ID)
- เงื่อนไขเครดิต (วัน)
- ข้อมูลติดต่อ (โทร, อีเมล, ที่อยู่)
- ยอดหนี้
- สถานะ (Active/Inactive)

**Flow การทำงาน:**
1. เพิ่ม/แก้ไข/ลบคู่ค้า
2. กำหนดเงื่อนไขเครดิต
3. ระบบใช้ข้อมูลนี้ในการคำนวณ Aging Report
4. ค้นหาและกรองตามประเภท

---

### 14. GL Mapping (การผูกบัญชีอัตโนมัติ)

**หน้าที่:** ผูกบัญชี GL กับรหัสสินค้า/บริการ, ช่องทางรับชำระเงิน, และบัญชีธนาคาร

**ข้อมูลที่จัดการ:**
- โมดูลต้นทาง (M1, M2, M3, M5)
- ประเภทต้นทาง (Product, PaymentChannel, Rental, Expense, Loan)
- รหัสต้นทาง (Source Code)
- ชื่อต้นทาง (Source Name)
- บัญชี GL (GL Account Code)
- ชื่อบัญชี GL (GL Account Name)
- ประเภทบัญชี (Revenue, Asset, Expense)
- สถานะ (Active/Inactive)

**Flow การทำงาน:**
1. เพิ่ม/แก้ไข/ลบ Mapping
2. ผูกรหัสสินค้า/บริการกับบัญชีรายได้
3. ผูกช่องทางชำระเงินกับบัญชีธนาคาร
4. ผูกค่าใช้จ่ายกับบัญชีค่าใช้จ่าย
5. ระบบใช้ Mapping นี้ในการลงบัญชีอัตโนมัติ

---

### 15. Legal Entities (นิติบุคคล)

**หน้าที่:** จัดการนิติบุคคลและสาขา (Consolidation Support)

**ข้อมูลที่จัดการ:**
- รหัสนิติบุคคล
- ชื่อนิติบุคคล
- เลขประจำตัวผู้เสียภาษี
- สกุลเงิน
- อัตรา VAT
- ที่อยู่, โทร, อีเมล
- สถานะ
- สาขา (สำนักงานใหญ่, สาขา A, B, C, D)
- รายได้รวม
- สินทรัพย์รวม

**Flow การทำงาน:**
1. เพิ่ม/แก้ไขนิติบุคคล
2. กำหนดสาขา
3. ระบบรองรับการทำบัญชีแยกตามนิติบุคคล
4. รองรับการรวมงบ (Consolidation)

---

### 16. Audit Trail (Audit Trail)

**หน้าที่:** บันทึกประวัติทุกธุรกรรมเพื่อตรวจสอบย้อนหลัง

**ข้อมูลที่บันทึก:**
- Timestamp
- ผู้ใช้ (User)
- การกระทำ (สร้าง, แก้ไข, ลบ, ปิดงบดุล, กระทบยอด)
- โมดูล (Journal Entry, Chart of Accounts, Month End Closing, Bank Reconciliation)
- รหัสระเบียน (Record ID)
- คำอธิบาย
- การเปลี่ยนแปลง (Before/After)
- IP Address

**Flow การทำงาน:**
1. ระบบบันทึกทุกการกระทำอัตโนมัติ
2. กรองตามโมดูล, การกระทำ, วันที่
3. แสดงประวัติการเปลี่ยนแปลง
4. ส่งออกเป็นรายงานสำหรับผู้ตรวจสอบบัญชี

---

### 17. Advanced Analytics (วิเคราะห์ขั้นสูง)

**หน้าที่:** พยากรณ์กระแสเงินสด, วิเคราะห์แนวโน้ม, และวิเคราะห์ Variance

**ข้อมูลที่วิเคราะห์:**
- พยากรณ์กระแสเงินสด (Cash Flow Forecasting)
  - ยอดเงินสดปัจจุบัน
  - พยากรณ์ 3-6 เดือน
  - ความมั่นใจ (Confidence)
- วิเคราะห์แนวโน้ม (Trend Analysis)
  - รายได้ (แนวโน้ม, อัตราการเติบโต)
  - ค่าใช้จ่าย (แนวโน้ม, อัตราการเติบโต)
  - กำไรสุทธิ (แนวโน้ม, อัตราการเติบโต)
- วิเคราะห์ Variance กับงบประมาณ (Budget vs Actual)
  - งบประมาณ
  - ยอดจริง
  - ส่วนต่าง (Variance)
  - สถานะ (ดี/ต้องตรวจสอบ)

**Flow การทำงาน:**
1. ระบบวิเคราะห์ข้อมูลย้อนหลัง
2. พยากรณ์กระแสเงินสด 3-6 เดือน
3. วิเคราะห์แนวโน้มรายได้/ค่าใช้จ่าย/กำไร
4. เปรียบเทียบกับงบประมาณ
5. แสดงผลในรูปแบบ Dashboard

---

### 18. Risk Dashboard (แดชบอร์ดความเสี่ยง)

**หน้าที่:** แสดงแจ้งเตือนความผิดปกติ

**ข้อมูลที่แสดง:**
- ความเสี่ยงทั้งหมด
- วิกฤต (Critical)
- เตือน (Warning)
- แก้ไขแล้ว (Resolved)
- แจ้งเตือนความเสี่ยง:
  - สต็อกขาดเกิน 5%
  - ลูกหนี้เกิน 90 วัน
  - ใกล้ปิดงบดุล
- ความเสี่ยงสต็อก (รายการที่มีส่วนต่างเกิน 5%)
- ลูกหนี้เกินกำหนด (รายการที่ค้างชำระเกิน 90 วัน)

**Flow การทำงาน:**
1. ระบบตรวจสอบความผิดปกติอัตโนมัติ
2. แจ้งเตือนเมื่อพบความเสี่ยง
3. แสดงรายละเอียดความเสี่ยง
4. ติดตามการแก้ไข

---

### 19. Alerts (การแจ้งเตือน)

**หน้าที่:** ส่งอีเมล/SMS สำหรับเหตุการณ์สำคัญ

**ข้อมูลที่จัดการ:**
- ชื่อการแจ้งเตือน
- ประเภท (closing, variance, aging, reconciliation)
- ช่องทาง (email, sms)
- เงื่อนไข (trigger)
- ค่าความเป็นจริง (trigger value)
- ข้อความ
- สถานะ (เปิดใช้งาน/ปิดใช้งาน)
- ส่งล่าสุด

**Flow การทำงาน:**
1. เพิ่ม/แก้ไข/ลบการแจ้งเตือน
2. กำหนดเงื่อนไขและช่องทาง
3. ระบบตรวจสอบเงื่อนไขอัตโนมัติ
4. ส่งการแจ้งเตือนเมื่อเงื่อนไขเป็นจริง
5. บันทึกประวัติการส่ง

---

### 20. Settings (ตั้งค่า)

**หน้าที่:** ตั้งค่าระบบบัญชี

**ข้อมูลที่ตั้งค่า:**
- ข้อมูลบริษัท (ชื่อ, รหัส, Tax ID, ที่อยู่, โทร, อีเมล)
- ตั้งค่าบัญชี:
  - สกุลเงิน
  - อัตรา VAT
  - ปีบัญชีเริ่มต้น/สิ้นสุด
  - ลงบัญชีอัตโนมัติ
  - คำนวณภาษีอัตโนมัติ
- การเชื่อมต่อกับโมดูลอื่น:
  - M1 - บริหารจัดการปั๊มน้ำมัน
  - M2 - จัดการพื้นที่เช่า
  - M3 - ระบบบุคคล
  - M5 - ระบบกองทุน
  - ซิงค์ข้อมูลอัตโนมัติ

**Flow การทำงาน:**
1. แก้ไขข้อมูลบริษัท
2. ตั้งค่าบัญชีและภาษี
3. เปิด/ปิดการเชื่อมต่อกับโมดูลอื่น
4. บันทึกการตั้งค่า

---

## Flow การทำงานหลักของระบบ

### 1. การรับข้อมูลจากโมดูลอื่น

1. ระบบรับข้อมูลจาก M1, M2, M3, M5
2. ใช้ GL Mapping เพื่อผูกบัญชีอัตโนมัติ
3. ลง Journal Entry อัตโนมัติ
4. คำนวณภาษีอัตโนมัติ (VAT, Withholding Tax)

### 2. การปิดงบดุลรายเดือน

1. ตรวจสอบรายการบัญชีทั้งหมด
2. กระทบยอดธนาคาร
3. กระทบยอดสต็อก
4. คำนวณภาษี VAT
5. ตรวจสอบยอดคงเหลือ (Trial Balance)
6. บันทึกค่าเสื่อมราคา
7. สร้างรายงานการเงิน (งบดุล, งบกำไรขาดทุน, งบกระแสเงินสด)
8. ปิดงบดุล (ล็อกข้อมูล)

### 3. การออกรายงานภาษี

1. ระบบดึงข้อมูลจาก Tax Calculation
2. จัดทำรายงานภาษี (ภ.ง.ด.1/3/53, สปส.1-10, ภ.พ.30)
3. ตรวจสอบความถูกต้อง
4. ส่งกรมสรรพากร (e-Tax) หรือดาวน์โหลด PDF

### 4. การจัดการความเสี่ยง

1. ระบบตรวจสอบความผิดปกติอัตโนมัติ
2. แจ้งเตือนเมื่อพบความเสี่ยง (สต็อกขาด, ลูกหนี้เก่า)
3. แสดงใน Risk Dashboard
4. ติดตามการแก้ไข

---

## ข้อมูลหลักที่ระบบจัดการ

### 1. บัญชี (Accounts)
- รหัสบัญชี, ชื่อบัญชี, ประเภท, ระดับ, บัญชีแม่, ยอดคงเหลือ

### 2. รายการบัญชี (Journal Entries)
- รหัสรายการ, วันที่, คำอธิบาย, โมดูล, เดบิต, เครดิต, สถานะ

### 3. ภาษี (Tax)
- VAT Output, VAT Input, VAT Payable, ภาษีหัก ณ ที่จ่าย

### 4. รายงานการเงิน (Financial Reports)
- งบดุล, งบกำไรขาดทุน, งบกระแสเงินสด

### 5. สินทรัพย์ถาวร (Fixed Assets)
- รหัส, ชื่อ, ประเภท, มูลค่าซื้อ, ค่าเสื่อมสะสม, มูลค่าตามบัญชี

### 6. คู่ค้า (Vendors & Customers)
- รหัส, ชื่อ, Tax ID, เงื่อนไขเครดิต, ยอดหนี้

### 7. GL Mapping
- โมดูล, ประเภทต้นทาง, รหัสต้นทาง, บัญชี GL

### 8. นิติบุคคล (Legal Entities)
- รหัส, ชื่อ, Tax ID, สาขา

### 9. Audit Trail
- Timestamp, ผู้ใช้, การกระทำ, โมดูล, การเปลี่ยนแปลง

---

## การเชื่อมต่อกับโมดูลอื่น

### 1. M1 - บริหารจัดการปั๊มน้ำมัน
- รับข้อมูล: ยอดขาย, ซื้อเข้า, คูปอง
- ส่งข้อมูล: กระทบยอดสต็อก

### 2. M2 - จัดการพื้นที่เช่า
- รับข้อมูล: ค่าเช่ารับ, ค่าเช่าจ่าย

### 3. M3 - ระบบบุคคล
- รับข้อมูล: เงินเดือน, OT, ประกันสังคม

### 4. M5 - ระบบกองทุน
- รับข้อมูล: กู้ยืม, ชำระหนี้, ดอกเบี้ย

---

## หมายเหตุสำคัญ

### 1. การลงบัญชีอัตโนมัติ
- ระบบลง Journal Entry อัตโนมัติเมื่อได้รับข้อมูลจากโมดูลอื่น
- ใช้ GL Mapping เพื่อผูกบัญชี
- ตรวจสอบความสมดุล (Debit = Credit) ก่อน Post

### 2. การคำนวณภาษี
- คำนวณ VAT Output อัตโนมัติ (อัตรา 7%)
- คำนวณ VAT Input อัตโนมัติ
- คำนวณภาษีหัก ณ ที่จ่ายตามอัตรา (เงินเดือน 2%, บริการ 5%)

### 3. การปิดงบดุล
- ต้องตรวจสอบครบถ้วนก่อนปิด
- เมื่อปิดแล้วไม่สามารถแก้ไขข้อมูลได้
- สร้างรายงานการเงินอัตโนมัติ

### 4. การกระทบยอด
- กระทบยอดธนาคาร: นำเข้า Bank Statement, กระทบยอดอัตโนมัติ
- กระทบยอดสต็อก: เปรียบเทียบยอดระบบกับยอดนับจริง, คำนวณ Loss/Gain

### 5. การจัดการสินทรัพย์ถาวร
- คำนวณค่าเสื่อมรายเดือนอัตโนมัติ (Straight-Line Method)
- บันทึกค่าเสื่อมเมื่อปิดงบดุล

### 6. การแจ้งเตือน
- แจ้งเตือนเมื่อใกล้ปิดงบดุล
- แจ้งเตือนเมื่อสต็อกขาดเกิน 5%
- แจ้งเตือนเมื่อลูกหนี้เกิน 90 วัน

### 7. Audit Trail
- บันทึกทุกการกระทำอัตโนมัติ
- ใช้สำหรับตรวจสอบย้อนหลัง
- รองรับการออกรายงานสำหรับผู้ตรวจสอบบัญชี

---

## สรุป

ระบบบัญชีและงบดุล (M6) เป็นระบบบัญชีกลางที่รับข้อมูลจากทุกโมดูลเพื่อลงบัญชีอัตโนมัติ คำนวณภาษี ปิดงบดุลรายเดือน และออกรายงานการเงินต่างๆ ระบบรองรับการทำบัญชีสำหรับหลายนิติบุคคลและสาขา พร้อมการตรวจสอบความผิดปกติและการแจ้งเตือนอัตโนมัติ

